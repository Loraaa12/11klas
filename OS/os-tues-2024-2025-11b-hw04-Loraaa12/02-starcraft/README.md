# Задача 2 - `starcraft` (200 точки)

Студиото за разработка на игри Blizzard Entertainment има нужда от помощ в разработването
на прототип на следваща игра от поредицата StarCraft. Подобно на предишните версии
на играта, когато играта стартира, играчът разполага с 5 работници (SCV), Команден
център (Command Center) и 0 минерали. Целта на играча е да построи 20 войника. Войниците
струват минерали, които се набавят с помощта на работници. Броят на минералните блокове
се подава като аргумент при стартирането на играта. Играта приключва след като се
изкопаят всички минерални блокове на картата и се построят 20 войника. Играчът подава
команди на стандартния вход. Целта на задачата е да се реализира синхронизация на
нишки посредством `mutex`-и.

## Работници

Работниците служат за добиване на минерали. Изпълняват следната поредица
от действия:

1. Придвижване до непразен минерален блок (симулира се време, 3s).

2. Проверка дали минералния блок е свободен (не се симулира
   допълнително време)

3. Копаене на минерали (не се симулира допълнително време).

4. Транспортиране на минералите до Командния център (симулира се време,
   2s).

5. Разтоварване на минералите (не се симулира допълнително време).

6. (Връщане на стъпка 1).

При всяко копаене се добиват 8 минерала. Всеки работник трябва да се
изпълнява в отделна нишка. При изчерпване на минералите на картата
нишките на работниците трябва да прекратят изпълнението си.

## Команден център

Командният център служи за обучение на войници и като място за
разтоварване на минерали. Обучението на войници не пречи на
разтоварването на минерали. Изисквания:

- В Командния център трябва да може да се разтоварват минерали и да се
  обучават войници едновременно.

- Само по един работник може да разтоварва минерали в Командния център
  по едно и също време.

Обучаването на войник струва 50 минерала и се симулира време за обучение
1s. След обучението на войник трябва да се изведе съобщението "You wanna
piece of me, boy?".

## Команди подавани от играча

Командите се подават от играча на стандартния вход. Възможните команди
са:

- "m" за да се построи нов войник.

## Общи

- Първоначалният брой минерални блокове е 2 (ако не е подаден аргумент
  на програмата).

- Всеки минерален блок съдържа 500 минерала.

- Общият брой работници и войници не може да надвишава 200.

- Всички нишки трябва да работят паралелно една спрямо друга.

- Синхронизацията между отделните нишки трябва да става посредством
  `mutex`-и.

- Симулирането на време става чрез използването на `sleep()`.

- Не е нужно да се следи за ситуации, в които играчът не може да
  завърши успешно играта.

При приключване на играта трябва да се изведе броя на първоначалните
минерали на картата, текущото количество минерали на играча, броя на
работници и броя на войници (Пример: "Map minerals N, player minerals M,
SCVs X, Marines Y", където N, M, X, Y са броя на съответните ресурси).
При правилно решение на задачата, сумата на текущото количество минерали
и похарчените за единици ВИНАГИ ще е равна на първоначалните минерали на
картата.

## Примерна игра

```plaintext
SCV 1 is mining from mineral block 1
SCV 1 is transporting minerals
SCV 1 delivered minerals to the Command Center
SCV 2 is mining from mineral block 2
SCV 2 is transporting minerals
SCV 2 delivered minerals to the Command Center
SCV 3 is mining from mineral block 1
SCV 3 is transporting minerals
SCV 3 delivered minerals to the Command Center
SCV 4 is mining from mineral block 2
SCV 4 is transporting minerals
SCV 4 delivered minerals to the Command Center
m
Not enough minerals.
SCV 5 is mining from mineral block 2
SCV 5 is transporting minerals
SCV 5 delivered minerals to the Command Center
SCV 1 is mining from mineral block 1
SCV 1 is transporting minerals
SCV 1 delivered minerals to the Command Center
SCV 2 is mining from mineral block 2
SCV 2 is transporting minerals
SCV 2 delivered minerals to the Command Center
m
You wanna piece of me, boy?
...
Map minerals 1000, player minerals 0, SCVs 5, Marines 20
```

## Поддръжка на N на брой работници

Играчът има възможност да обучава работници от Командния център, чрез въвеждане
на команда "s" на стандартния вход. Цената на един работник е 50 минерала и времето
за обучение е 4s. След обучението на работник трябва да се извежда съобщението "SCV
good to go, sir.".

```plaintext
...
SCV 1 is mining from mineral block 1
SCV 1 is transporting minerals
SCV 1 delivered minerals to the Command Centers
SCV 1 is mining from mineral block 2
SCV 1 is transporting minerals
SCV good to go, sir.
SCV 2 is mining from mineral block 3
SCV 2 is transporting minerals
SCV 1 delivered minerals to the Command Center
SCV 2 delivered minerals to the Command Center
...
```

## Обработка на грешки

- При логически грешки от страна на играча трябва да се изведе съобщение за грешка
  и играта да се продължи. Пример за логическа грешка е строенето на войник, когато
  няма достатъчно събрани минерали.

- Ако при извикване на pthread_create, pthread_mutex_init, и т.н. възникне грешка,
  трябва да се изведе съобщение за грешка и програмата да се прекрати.
