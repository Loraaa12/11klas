# Задача 2 - `head` (200 точки)

## Задача 1 - `ls` (200 точки + 75 точки бонус)

### Упътване

За решението на тази задача, може да използвате следните функции:

- `stat` - Записва информация за подаден файл (размер, id на собственика, id на групата, т.н.).
- Макросите `S_IFDIR`, `S_IFLINK`, т.н. от `sys/stat.h` - виж повече информация [тук](https://pubs.opengroup.org/onlinepubs/7908799/xsh/sysstat.h.html).
- `opendir` - Отваря към директория, името на която е подадено като аргумент, и връща указател към него.
- `readdir` - Чете подфайловете на директория.
- `closedir` - Затваря указателя отворен чрез `opendir`.
- `getpwuid` - Връща информацията за потребител по uid (user id).
- `getgrgid` - Връща информацията за група по gid (group id).
- `localtime` - Конвертира UNIX time_t структурата към четливо, локално време.

### Основна функционалност

Целта на задачате е да се реализира стандартната `UNIX` комадна `ls` с добавена функционалност.

Командата `ls` се използва за извеждане на съдържанието на директории. От командния ред програмата получава списък от имена на файлове и/или директории, а на стандартния изход извежда информация за тях. Ако подаденото име, е съществуващ файл, се извежда името му, а ако името е на директория - имената на всички файлове, съдържащи се в директорията.

Примерен изход на програмата:

```
$ ls a.txt
a.txt
```

```
$ ls /usr/share/texmf/tex
fontinst
generic
latex
```

**Забележка**: `ls` не показва скрити файлове (файлове започващи с точка - `.`).

В случай на повече от един аргумент изходът изглежда по следния начин:

```
$ ls a.txt b.txt /usr/share/texmf/tex /usr/share/texmf/metapost/
a.txt

b.txt

/usr/share/texmf/metapost/:
metauml

/usr/share/texmf/tex:
fontinst
generic
latex
```

### Поддръжка на `-A` аргумент

Командата `ls` трябва да поддържа незадължителния аргумент `-A`.

При използване на опцията `-A` командата трябва да извежда и скритите файлове без \"..\" и \".\". Например:

```
$ ls -A
a.out
a.txt
b.txt
forbidden
.hidden
main.c
```

### Поддръжка на `-l` аргумент

Командата `ls` трябва да поддържа незадължителния аргумент `-l`.

При използване на опцията `-l` командата трябва да извежда подробна
информация за файловете. Например:

```
$ ls -l
total 28
-rwxrwxr-x 1 rick rollers 8510 май 31 01:56 a.out
-rw-rw-r-- 1 rick rollers   13 май 31 01:51 a.txt
-rw-rw-r-- 1 rick rollers   27 май 31 01:51 b.txt
d--------- 2 rick rollers 4096 май 31 01:54 forbidden
-rw-rw-r-- 1 rick rollers   72 май 31 01:51 main.c
```

Прието е типовете на файловете в POSIX да се означават по следния начин:

- обикновен файл - '-'
- директория - 'd'
- блоково устройство - 'b'
- символно устройство - 'c'
- програмен поток - 'p'
- символна връзка - 'l'
- сокет - 's'

След типа се изписват правата на собственика, правата на групата собственик и правата на всички останали. След това се изписват броят на силните връзки към файла (hard links), собственика (име или uid, ако името не е налично), групата (име или gid, ако името не е налечно), размер, дата на последна промяна и самото име на файла.

### Комбинация от опции

Възможна е произволна комбинация от опции. Например: `ls -lА`, `ls -Аl`, `ls -l -A` и т.н.

### Обработка на грешки

Ако някой от аргументите на `ls` не е файл или директория, то програмата трябва да изведе съобщение на стандартната грешка (`stderr`). Например, ако бъдат предадени аргументи, които не са файлове, то съобщението трябва да бъде оформено по следния начин:

```
$ ls aa
ls: cannot access 'aa': No such file or directory
```

Ако на програмата се предаде име на директория, която потребителят няма права да отвори, то съобщението трябва да бъде оформено по следния начин:

```
$ ls forbidden/
ls: cannot open directory 'forbidden/': Permission denied
```

### Поддръжка на `-R` аргумент

Командата `ls` да поддържа незадължителния аргумент `-R`. При използване на опцията `-R` командата трябва при обработване на директории да ги обхожда рекурсивно. При примерна файлова структура:

```
.
|-- a.out
|-- a.txt
|-- b.txt
|-- dir1
|  |-- dir11
|  |-- file01.txt
|-- dir2
|-- dir3
```

резултатът от изпълнението на програмата трябва да е:

```
$ ls -R

.:
a.out
a.txt
b.txt
dir1
dir2
dir3

./dir1:
dir11
file01.txt

./dir1/dir11:

./dir2:

./dir3:
```
